name: Integration Tests
on: [push, pull_request]
jobs:
  Run-Checks:
    runs-on: ubuntu-latest
    container: ghcr.io/open-s4c/vsyncer-ci:${{ github.sha }}
    steps:
      - name: Which commit
        run: echo "you are running on this docker ${{ github.sha }}"
      - name: Check out and build
        uses: actions/checkout@v4
      - run: make
      - run: cmake -S./test -Bbuild
      - run: cmake --build build
      - run: ctest --test-dir build --output-on-failure
